// Generated by CoffeeScript 1.6.3
(function() {
  var MapBackground,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  MapBackground = (function() {
    function MapBackground(selector, navigation) {
      this.selector = selector;
      this.navigation = navigation;
      this._navigationChanged = __bind(this._navigationChanged, this);
      this.map = null;
      this.navigation.subscribe(this._navigationChanged);
    }

    MapBackground.prototype._navigationChanged = function() {
      var bbox, bounds, northEast, southWest;
      if ((this.navigation() != null) && (this.map == null)) {
        console.dir(this.navigation());
        bbox = this.navigation().descend.geo_bbox();
        southWest = L.latLng(bbox[0], bbox[1]);
        northEast = L.latLng(bbox[2], bbox[3]);
        bounds = L.latLngBounds(southWest, northEast);
        this.map = L.map(this.selector).fitBounds(bounds);
        return L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: 'Map data Â© OpenStreetMap contributors',
          maxZoom: 18
        }).addTo(this.map);
      }
    };

    return MapBackground;

  })();

  window.MapBackground = MapBackground;

}).call(this);

/*
//@ sourceMappingURL=MapBackground.map
*/
