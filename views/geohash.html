<!doctype html>
<html lang=en>
<meta charset=utf-8>
<title>GeoSummary version {{thisPackage.version}}</title>
<link rel="subresource" href="images">
<link rel="subresource" href="navigation">

<style type="text/css">
    html, body
    {
        height: 100%;
    }

    .navigation, .navigation .rows {
        display: block;
        width: 100%;
        height: 100%;
    }

    .navigation .row {
        width: 100%;
        height: 25%;
    }

    .navigation .rows.height4 .row {
        height: 25%;
    }

    .navigation .rows.height8 .row {
        height: 12.5%;
    }

    .navigation .item {
        float: left;
    }

    .navigation .row.width8 .item {
        width: 12.5%;
    }

    .navigation .row.width4 .item {
        width: 25%;
    }

    .navigation a {
        display: block;
        width: 100%;
    }
</style>

<div class="navigation" data-bind="with: navigation, visible: navigation" style="display: none">
    <div class="rows" data-bind="foreach: descend.values, css: { height8: descend.values().length == 8, height4: descend.values().length == 4 }">
        <div class="row" data-bind="foreach: $data, css: { width8: $data.length == 8, width4: $data.length == 4 }">
           <div class="item">
               <div data-bind="if: images().length > 0">
                <a data-bind="attr: { href: href }, text: name"></a>
               </div>
               <div data-bind="if: images().length === 0">
                   <span data-bind="text: name"></span>
               </div>
               <div class="images" data-bind="foreach: images">
                   <img data-bind="attr: { src: img_href }, text: name"></a>
               </div>
           </div>
        </div>
    </div>
</div>

<script src="/bower_components/uri.js/src/URI.min.js"></script>
<script src="/bower_components/zepto/zepto.min.js"></script>
<script src="/bower_components/knockout.js/knockout.js"></script>
<script src="/bower_components/knockout-mapping/knockout.mapping.js"></script>
<script src="/bower_components/underscore/underscore-min.js"></script>
<script src="/js/Application.js"></script>
<script type="application/javascript">
    $(function() {
        var app = new Application(window.location.href, "images", "navigation", 1000, 2);
        ko.applyBindings(app.model);
        app.run();
    });
</script>